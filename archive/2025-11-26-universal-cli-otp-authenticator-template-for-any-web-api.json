{
  "title": "Universal CLI OTP Authenticator Template for Any Web API",
  "date": "2025-11-26",
  "context": "Creating a reusable encrypted OTP CLI system for any web API that uses TOTP, starting with QR decoding, secure secret storage with GPG and pass, and universal OTP retrieval.",
  "category": "Security",
  "keyIdea": "A portable, offline command-line OTP system that decodes QR codes, stores Base32 secrets encrypted under GPG via pass, and provides a universal 'otp <service>' command for generating 2FA codes locally.",
  "commands": "sudo apt update && sudo apt install -y oathtool pass zbar-tools gnupg\n\ngpg --full-generate-key\ngpg --list-keys\npass init <KEYID>\n\nzbarimg ~/Downloads/api-qr.png\n# Extract 'secret=' value and store it securely\npass insert otp/<service-name>\n\noathtool --totp -b \"$(pass otp/<service-name>)\"\n\necho \"alias otp='f(){ oathtool --totp -b \\\"\\$(pass \\\"otp/\\$1\\\")\\\"; }; f'\" >> ~/.bashrc\nsource ~/.bashrc\n# Usage:\notp github",
  "explanation": "This setup provides a universal CLI-based TOTP authenticator for any Web API. It securely decodes and stores secrets using GPG encryption via pass and uses oathtool to generate OTPs offline. The shell alias 'otp' simplifies retrieving tokens per service.",
  "reusabilityNotes": {
    "whenToReuse": "Use whenever you need a secure, offline OTP generator for APIs that provide TOTP QR codes for 2FA.",
    "pitfalls": "Do not store full otpauth URIs; only the Base32 secret. Backup your GPG key or all OTP entries will be unrecoverable. Incorrect alias quoting may break token generation."
  },
  "uniquenessTag": "Uniqueness: New",
  "storedBy": "lesson-archive-api",
  "storedAt": "2025-11-26T13:16:00.133Z"
}