{
  "title": "Restarting cosmic-session.target freezes COSMIC DE",
  "date": "2025-11-19",
  "context": "On Pop!_OS 24.04 Beta with COSMIC DE, I attempted to restart the session target to regain focus stability. Killing `cosmic-comp` worked fine, but restarting `cosmic-session.target` caused heavy lag for ~45 s before total freeze, requiring a manual reboot.",
  "category": "Troubleshooting",
  "keyIdea": "Restarting `cosmic-session.target` in COSMIC Beta can trigger a compositor or D‑Bus deadlock, since it attempts to respawn core graphical scopes without reinitializing GPU and Wayland state. Killing the compositor alone is safer.",
  "commands": "```bash\n# Restarting compositor safely\npkill -f cosmic-comp\n\n# (Problematic) Restarting full session — causes freeze\nsystemctl --user restart cosmic-session.target\n```",
  "explanation": "`cosmic-session.target` manages all DE scopes; restarting it mid‑session spawns new compositor and panel processes without clearing stale Wayland sockets or EGL contexts, leading to resource contention and eventual hang. In current builds, this command isn’t intended for live use.",
  "reusabilityNotes": {
    "whenToReuse": "Use when exploring session management behavior; prefer process‑level restart for compositor or panel, not full target.",
    "pitfalls": "Restarting the full `cosmic-session.target` on Pop!_OS 24.04 Beta may freeze the desktop due to GPU/Wayland reinitialization deadlock. Always save work first."
  },
  "uniquenessTag": "Related to: “Restarting COSMIC compositor when managed under cosmic-session target”",
  "storedBy": "lesson-archive-api",
  "storedAt": "2025-11-19T22:01:21.680Z"
}