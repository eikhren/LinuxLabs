{
  "title": "Secure Desktop OTP Authenticator with oathtool and pass on Ubuntu 24.04",
  "date": "2025-11-25",
  "context": "Configured a command-line OTP authenticator using oathtool integrated with the pass password store and GPG encryption. Encountered and fixed alias issues for generating TOTP codes.",
  "category": "Security",
  "keyIdea": "Use oathtool for local TOTP generation with pass to encrypt secrets via GPG, and fix Bash alias quoting to prevent argument mis-expansion.",
  "commands": "sudo apt install oathtool pass zbar-tools -y\n# Initialize GPG and pass\ngpg --full-generate-key\npass init <KEYID>\n# Decode QR secret and store it securely\nzbarimg ~/path/to/QR.png\npass insert otp/github\n# Generate OTP manually\noathtool --totp -b \"$(pass otp/github)\"\n# Create Bash alias\nalias otp='f(){ oathtool --totp -b \"$(pass \"otp/$1\")\"; }; f'\nsource ~/.bashrc",
  "explanation": "This setup provides a secure local OTP generator that integrates with encrypted storage via GPG. The corrected alias prevents premature variable expansion that caused Base32 decoding errors.",
  "reusabilityNotes": {
    "whenToReuse": "Use this process whenever you want a terminal-based OTP generator that stores secrets securely under GPG on Ubuntu or similar distributions.",
    "pitfalls": "Ensure only the Base32 secret (not the entire otpauth URI) is stored; incorrect alias quoting will break token generation."
  },
  "uniquenessTag": "Uniqueness: New",
  "storedBy": "lesson-archive-api",
  "storedAt": "2025-11-25T08:12:50.532Z"
}